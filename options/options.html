<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Email2Calendar Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="settings-container">
    <div class="settings-header">
      <h1>Email2Calendar Settings</h1>
      <p>Configure your email-to-calendar automation preferences</p>
    </div>

    <div class="settings-content">
      <section class="settings-section">
        <h2>ü§ñ AI Configuration</h2>
        <div class="setting-group">
          <label for="extractorType">AI Extractor Type:</label>
          <select id="extractorType">
            <option value="hybrid">üß† Hybrid (Compromise.js + Llama 3.1)</option>
            <option value="enhanced">üîß Enhanced NLP</option>
            <option value="basic">‚ö° Basic Pattern Matching</option>
          </select>
          <small>Hybrid uses fast NLP + AI for best accuracy</small>
        </div>

        <div class="setting-group" id="togetherApiKeyGroup" style="display: none;">
          <label for="togetherApiKey">Together AI API Key:</label>
          <input type="password" id="togetherApiKey" placeholder="Enter Together AI API key">
          <small>Required for Llama 3.1 processing. Get one free at <a href="https://api.together.xyz" target="_blank">Together AI</a></small>
        </div>

        <div class="setting-group" id="hybridModeGroup" style="display: none;">
          <label for="hybridMode">Hybrid Processing Mode:</label>
          <select id="hybridMode">
            <option value="compromise_first">‚ö° Compromise.js First (Faster)</option>
            <option value="llama_first">üß† Llama 3.1 First (More Accurate)</option>
            <option value="parallel">üöÄ Parallel Processing (Best Quality)</option>
          </select>
          <small>Choose processing strategy for hybrid extraction</small>
        </div>

        <div class="setting-group">
          <label for="confidenceThreshold">Confidence Threshold:</label>
          <input type="range" id="confidenceThreshold" min="0.1" max="1.0" step="0.1" value="0.7">
          <span id="confidenceValue">0.7</span>
          <small>Minimum confidence level required to suggest an event</small>
        </div>
      </section>

      <section class="settings-section">
        <h2>üìÖ Calendar Settings</h2>
        <div class="setting-group">
          <label for="defaultCalendar">Default Calendar:</label>
          <select id="defaultCalendar">
            <option value="primary">Primary Calendar</option>
            <!-- Populated dynamically -->
          </select>
        </div>

        <div class="setting-group">
          <label for="defaultDuration">Default Event Duration (minutes):</label>
          <input type="number" id="defaultDuration" value="60" min="15" max="480" step="15">
        </div>

        <div class="setting-group">
          <label>
            <input type="checkbox" id="addAsPrivate">
            Mark extracted events as private by default
          </label>
        </div>

        <div class="setting-group">
          <label>
            <input type="checkbox" id="requireConfirmation" checked>
            Require confirmation before adding events
          </label>
        </div>
      </section>

      <section class="settings-section">
        <h2>üîç Detection Settings</h2>
        <div class="setting-group">
          <label>
            <input type="checkbox" id="autoDetection" checked>
            Enable automatic event detection
          </label>
        </div>

        <div class="setting-group">
          <label for="emailFilters">Email Filters:</label>
          <textarea id="emailFilters" placeholder="meeting&#10;appointment&#10;call&#10;lunch&#10;dinner" rows="4"></textarea>
          <small>Keywords that indicate an email might contain events (one per line)</small>
        </div>

        <div class="setting-group">
          <label for="excludePatterns">Exclude Patterns:</label>
          <textarea id="excludePatterns" placeholder="newsletter&#10;unsubscribe&#10;automated" rows="3"></textarea>
          <small>Patterns to exclude from event detection (one per line)</small>
        </div>
      </section>

      <section class="settings-section">
        <h2>üîî Notifications</h2>
        <div class="setting-group">
          <label>
            <input type="checkbox" id="showNotifications" checked>
            Show notifications when events are detected
          </label>
        </div>

        <div class="setting-group">
          <label>
            <input type="checkbox" id="soundEnabled">
            Play sound for notifications
          </label>
        </div>
      </section>

      <section class="settings-section">
        <h2>üîí Privacy & Security</h2>
        <div class="setting-group">
          <label>
            <input type="checkbox" id="localProcessing" checked>
            Process emails locally when possible
          </label>
          <small>Reduces data sent to external services</small>
        </div>

        <div class="setting-group">
          <label>
            <input type="checkbox" id="logActivity">
            Log activity for debugging
          </label>
          <small>Helps troubleshoot issues (logs stored locally)</small>
        </div>

        <div class="setting-group">
          <button id="clearData" class="secondary-btn">Clear All Stored Data</button>
          <small>Remove all settings, logs, and cached data</small>
        </div>
      </section>
    </div>

    <div class="settings-footer">
      <button id="saveSettings" class="primary-btn">Save Settings</button>
      <button id="resetSettings" class="secondary-btn">Reset to Defaults</button>
      <div class="save-status" id="saveStatus"></div>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html>